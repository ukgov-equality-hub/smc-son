<div class="govuk-cookie-banner "
     data-nosnippet=""
     role="region"
     aria-label="Cookies on GOV.UK State of the Nation"
     data-module="govuk-cookie-banner"
     hidden>

    <div class="govuk-cookie-banner__message govuk-width-container app-width-container js-cookie-banner-message">
        <div class="govuk-grid-row">
            <div class="govuk-grid-column-two-thirds">
                <h2 class="govuk-cookie-banner__heading govuk-heading-m">
                    Cookies on GOV.UK State of the Nation
                </h2>
                <div class="govuk-cookie-banner__content">
                    <p class="govuk-body">
                        We’d like to use analytics cookies so we can understand how you use the State of the Nation and make improvements.
                    </p>
                    <p class="govuk-body">
                        We also use essential cookies to remember if you’ve accepted analytics cookies.
                    </p>
                </div>
            </div>
        </div>
        <div class="govuk-button-group">
            <button type="button" class="govuk-button js-cookie-banner-accept" data-module="govuk-button">
                Accept analytics cookies
            </button>
            <button type="button" class="govuk-button js-cookie-banner-reject" data-module="govuk-button">
                Reject analytics cookies
            </button>
            <a class="govuk-link" href="/cookies">View cookies</a>
        </div>
    </div>

    <div class="govuk-cookie-banner__message govuk-width-container js-cookie-banner-confirmation-accept app-width-container"
        role="alert" hidden="">
        <div class="govuk-grid-row">
            <div class="govuk-grid-column-two-thirds">
                <div class="govuk-cookie-banner__content">
                    <p class="govuk-body">
                        You’ve accepted analytics cookies.
                        You can
                        <a href="/cookies"
                           class="govuk-link">
                            change your cookie settings</a>
                        at any time.
                    </p>
                </div>
            </div>
        </div>
        <div class="govuk-button-group">
            <button type="button"
                    class="govuk-button js-cookie-banner-hide js-cookie-banner-hide--accept"
                    data-module="govuk-button">
                Hide this message
            </button>
        </div>
    </div>

    <div class="govuk-cookie-banner__message govuk-width-container js-cookie-banner-confirmation-reject app-width-container"
         role="alert"
         hidden="">
        <div class="govuk-grid-row">
            <div class="govuk-grid-column-two-thirds">
                <div class="govuk-cookie-banner__content">
                    <p class="govuk-body">
                        You’ve rejected analytics cookies.
                        You can
                        <a href="/cookies"
                           class="govuk-link">
                            change your cookie settings</a>
                        at any time.
                    </p>
                </div>
            </div>
        </div>
        <div class="govuk-button-group">
            <button type="button"
                    class="govuk-button js-cookie-banner-hide js-cookie-banner-hide--reject"
                    data-module="govuk-button">
                Hide this message
            </button>
        </div>
    </div>
    
</div>
<script>
    /* If cookie policy changes and/or the user preferences object format needs to
     * change, bump this version up afterwards. The user should then be shown the
     * banner again to consent to the new policy.
     *
     * Note that because isValidCookieConsent checks that the version in the user's
     * cookie is equal to or greater than this number, you should be careful to
     * check backwards compatibility when changing the object format.
     *
     */
    window.GDS_CONSENT_COOKIE_VERSION = 1;

    (function () {
        /** Check the cookie preferences object.
         *
         * If the consent object is not present, malformed, or incorrect version,
         * returns false, otherwise returns true.
         *
         * This is also duplicated in cookie-functions.js - the two need to be kept in sync
         */
        function isValidConsentCookie(options) {
            return (options && options.version >= window.GDS_CONSENT_COOKIE_VERSION)
        }

        // Don't show the banner on the cookies page
        if (window.location.pathname !== "/cookies") {
            // Show the banner if there is no consent cookie or if it is outdated
            var currentConsentCookie = document.cookie.match(new RegExp('(^| )son_cookies_policy=([^;]+)'))

            if (!currentConsentCookie || !isValidConsentCookie(JSON.parse(currentConsentCookie[2]))) {
                var cookieBanner = document.querySelector("[data-module='govuk-cookie-banner']")
                cookieBanner.removeAttribute('hidden')
            }
        }
    })()
</script>
